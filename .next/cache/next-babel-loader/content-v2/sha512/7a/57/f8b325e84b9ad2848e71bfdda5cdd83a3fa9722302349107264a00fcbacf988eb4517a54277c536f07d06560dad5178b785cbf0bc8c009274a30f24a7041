{"ast":null,"code":"module.exports = {\n  setCreds: async hash => {\n    var date = new Date();\n    date.setTime(date + 365 * 86400000);\n    const jwtBody = {\n      hash: hash\n    };\n    var jwt = jsonwebtoken.sign(jwtBody, SMCData.secret, {\n      algorithm: SMCData.alg,\n      expiresIn: '1hr'\n    });\n    const cookieString = \"token=\" + jwt + \";expires=\" + date.toUTCString() + \";secure;HttpOnly;\";\n    return {\n      statusCode: 200,\n      payload: {\n        jwt: jwt,\n        cookie: cookieString\n      }\n    };\n  }\n};","map":{"version":3,"sources":["/home/charles/serverless-next.js/packages/serverless-components/nextjs-component/examples/evote/login/cookie.js"],"names":["module","exports","setCreds","hash","date","Date","setTime","jwtBody","jwt","jsonwebtoken","sign","SMCData","secret","algorithm","alg","expiresIn","cookieString","toUTCString","statusCode","payload","cookie"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiB;AACfC,EAAAA,QAAQ,EAAE,MAAOC,IAAP,IAAgB;AACxB,QAAIC,IAAI,GAAG,IAAIC,IAAJ,EAAX;AACAD,IAAAA,IAAI,CAACE,OAAL,CAAaF,IAAI,GAAI,MAAM,QAA3B;AAEA,UAAMG,OAAO,GAAG;AACdJ,MAAAA,IAAI,EAAEA;AADQ,KAAhB;AAIA,QAAIK,GAAG,GAAGC,YAAY,CAACC,IAAb,CAAkBH,OAAlB,EAA2BI,OAAO,CAACC,MAAnC,EAA2C;AAAEC,MAAAA,SAAS,EAAEF,OAAO,CAACG,GAArB;AAA0BC,MAAAA,SAAS,EAAE;AAArC,KAA3C,CAAV;AACA,UAAMC,YAAY,GAAG,WAASR,GAAT,GAAa,WAAb,GAA2BJ,IAAI,CAACa,WAAL,EAA3B,GAAgD,mBAArE;AAEF,WAAO;AACLC,MAAAA,UAAU,EAAE,GADP;AAELC,MAAAA,OAAO,EAAE;AACPX,QAAAA,GAAG,EAAEA,GADE;AAEPY,QAAAA,MAAM,EAAEJ;AAFD;AAFJ,KAAP;AAOD;AAnBgB,CAAjB","sourcesContent":["module.exports = {\n  setCreds: async (hash) => {\n    var date = new Date();\n    date.setTime(date + (365 * 86400000));\n\n    const jwtBody = {\n      hash: hash,\n    }\n\n    var jwt = jsonwebtoken.sign(jwtBody, SMCData.secret, { algorithm: SMCData.alg, expiresIn: '1hr'});\n    const cookieString = \"token=\"+jwt+\";expires=\" + date.toUTCString() + \";secure;HttpOnly;\"\n\n  return {\n    statusCode: 200,\n    payload: {\n      jwt: jwt,\n      cookie: cookieString\n    }\n  }\n}\n};\n"]},"metadata":{},"sourceType":"script"}