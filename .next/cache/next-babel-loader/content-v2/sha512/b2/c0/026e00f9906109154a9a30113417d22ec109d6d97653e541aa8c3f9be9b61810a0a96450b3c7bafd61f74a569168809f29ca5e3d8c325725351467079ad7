{"ast":null,"code":"import _regeneratorRuntime from \"/home/charles/serverless-next.js/packages/serverless-components/nextjs-component/examples/evote/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/charles/serverless-next.js/packages/serverless-components/nextjs-component/examples/evote/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport Container from \"../components/container\";\nimport Layout from \"../components/layout\";\nimport HomeImage from \"../components/home-image\";\nimport Head from \"next/head\";\nimport Link from \"next/link\";\nimport React, { useRef } from \"react\";\nimport { useRouter } from \"next/router\";\n\nvar handleSubmit = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n    var email, password;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n            email = emailInput.current.value;\n            password = passwordInput.current.value;\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function handleSubmit(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar LoginPage = function LoginPage() {\n  var router = useRouter();\n  var emailInput = useRef();\n  var passwordInput = useRef();\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var email, password, req, response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              email = emailInput.current.value;\n              password = passwordInput.current.value;\n              req = new Request(\"/api/sessions\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  email: email,\n                  password: password\n                })\n              });\n              console.log(\"Sending Login Request\");\n              _context2.next = 7;\n              return fetch(req);\n\n            case 7:\n              response = _context2.sent;\n\n              if (!response.ok) {\n                _context2.next = 10;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", router.push(\"/\"));\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleSubmit(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, __jsx(Layout, null, __jsx(Head, null, __jsx(\"title\", null, \"Evote Serverless\")), __jsx(Container, null, __jsx(HomeImage, null), __jsx(\"div\", {\n    className: \"index\"\n  }, __jsx(\"h1\", null, \"evote-serverless\", __jsx(\"span\", {\n    className: \"version-tag\"\n  }, \"v0.0.1\")), __jsx(\"div\", {\n    className: \"index-content\"\n  }, __jsx(\"form\", {\n    className: \"login-form\",\n    onSubmit: handleSubmit\n  }, __jsx(\"div\", {\n    className: \"input-effect col-3\"\n  }, __jsx(\"input\", {\n    className: \"effect-20\",\n    type: \"text\",\n    placeholder: \"Email Address\",\n    ref: emailInput\n  }), __jsx(\"span\", {\n    className: \"focus-border\"\n  }, __jsx(\"i\", null))), __jsx(\"div\", {\n    className: \"input-effect col-3\"\n  }, __jsx(\"input\", {\n    className: \"effect-20\",\n    type: \"password\",\n    placeholder: \"Password\",\n    ref: passwordInput\n  }), __jsx(\"span\", {\n    className: \"focus-border\"\n  }, __jsx(\"i\", null))), __jsx(\"div\", {\n    className: \"end-login\"\n  }, __jsx(\"input\", {\n    type: \"submit\"\n  }), __jsx(Link, {\n    href: \"/signup\"\n  }, __jsx(\"a\", {\n    className: \"instead\"\n  }, \"Sign Up\")))))))));\n};\n\nexport default LoginPage;","map":null,"metadata":{},"sourceType":"module"}