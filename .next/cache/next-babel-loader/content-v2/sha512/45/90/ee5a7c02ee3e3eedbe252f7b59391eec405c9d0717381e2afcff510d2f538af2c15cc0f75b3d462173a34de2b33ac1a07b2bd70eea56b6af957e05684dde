{"ast":null,"code":"import _regeneratorRuntime from \"/home/charles/serverless-next.js/packages/serverless-components/nextjs-component/examples/evote/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/charles/serverless-next.js/packages/serverless-components/nextjs-component/examples/evote/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/charles/serverless-next.js/packages/serverless-components/nextjs-component/examples/evote/pages/users/list.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Fragment } from \"react\";\nimport Link from \"next/link\";\nimport data from \"../../data\";\n\nfunction ListUsers(_ref) {\n  var _this = this;\n\n  var users = _ref.users;\n  return __jsx(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 7,\n      columnNumber: 5\n    }\n  }, __jsx(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8,\n      columnNumber: 7\n    }\n  }, users.map(function (user) {\n    return __jsx(\"li\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 13\n      }\n    }, user.fName);\n  })));\n}\n\n_c = ListUsers;\n\nListvoters.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n    var req, response;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            req = _ref2.req;\n\n            if (!req) {\n              _context.next = 8;\n              break;\n            }\n\n            _context.next = 4;\n            return data.readTable(\"Users\");\n\n          case 4:\n            _context.t0 = _context.sent;\n            return _context.abrupt(\"return\", {\n              users: _context.t0\n            });\n\n          case 8:\n            _context.next = 10;\n            return fetch(\"/api/users\");\n\n          case 10:\n            response = _context.sent;\n            _context.next = 13;\n            return response.json();\n\n          case 13:\n            _context.t1 = _context.sent;\n            return _context.abrupt(\"return\", {\n              users: _context.t1\n            });\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default ListUsers;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListUsers\");","map":{"version":3,"sources":["/home/charles/serverless-next.js/packages/serverless-components/nextjs-component/examples/evote/pages/users/list.js"],"names":["Fragment","Link","data","ListUsers","users","map","user","fName","Listvoters","getInitialProps","req","readTable","fetch","response","json"],"mappings":";;;;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,IAAP,MAAiB,YAAjB;;AAEA,SAASC,SAAT,OAA8B;AAAA;;AAAA,MAATC,KAAS,QAATA,KAAS;AAC5B,SACE,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,KAAK,CAACC,GAAN,CAAU,UAACC,IAAD,EAAU;AACnB,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKA,IAAI,CAACC,KAAV,CADF;AAGD,GAJA,CADH,CADF,CADF;AAWD;;KAZQJ,S;;AAcTK,UAAU,CAACC,eAAX;AAAA,uEAA6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAASC,YAAAA,GAAT,SAASA,GAAT;;AAAA,iBACvBA,GADuB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAKVR,IAAI,CAACS,SAAL,CAAe,OAAf,CALU;;AAAA;AAAA;AAAA;AAKvBP,cAAAA,KALuB;AAAA;;AAAA;AAAA;AAAA,mBAUFQ,KAAK,CAAC,YAAD,CAVH;;AAAA;AAUnBC,YAAAA,QAVmB;AAAA;AAAA,mBAWHA,QAAQ,CAACC,IAAT,EAXG;;AAAA;AAAA;AAAA;AAWhBV,cAAAA,KAXgB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA7B;;AAAA;AAAA;AAAA;AAAA;;AAeA,eAAeD,SAAf","sourcesContent":["import { Fragment } from \"react\";\nimport Link from \"next/link\";\nimport data from \"../../data\";\n\nfunction ListUsers({ users }) {\n  return (\n    <Fragment>\n      <ul>\n        {users.map((user) => {\n          return (\n            <li>{user.fName}</li>\n          );\n        })}\n      </ul>\n    </Fragment>\n  );\n}\n\nListvoters.getInitialProps = async ({ req }) => {\n  if (req) {\n    // this is server side\n    // is fine to use aws-sdk here\n    return {\n      users: await data.readTable(\"Users\")\n    };\n  } else {\n    // we are client side\n    // fetch via api\n    const response = await fetch(\"/api/users\");\n    return { users: await response.json() };\n  }\n};\n\nexport default ListUsers;\n"]},"metadata":{},"sourceType":"module"}